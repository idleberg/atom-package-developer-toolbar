'use strict';

var ue=Object.create;var N=Object.defineProperty;var pe=Object.getOwnPropertyDescriptor;var fe=Object.getOwnPropertyNames;var ge=Object.getPrototypeOf,me=Object.prototype.hasOwnProperty;var S=(n=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(n,{get:(e,t)=>(typeof require<"u"?require:e)[t]}):n)(function(n){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+n+'" is not supported')});var M=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var he=(n,e,t,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of fe(e))!me.call(n,a)&&a!==t&&N(n,a,{get:()=>e[a],enumerable:!(o=pe(e,a))||o.enumerable});return n};var j=(n,e,t)=>(t=n!=null?ue(ge(n)):{},he(!n||!n.__esModule?N(t,"default",{value:n,enumerable:!0}):t,n));var Z=M(R=>{Object.defineProperty(R,"__esModule",{value:!0});var we=S("os"),be=S("child_process"),ke=S("fs"),_e=S("path");function V(n){return n&&typeof n=="object"&&"default"in n?n:{default:n}}var B=V(we),E=V(ke),A=V(_e),xe=(n,e=1,t)=>{if(t={indent:" ",includeEmptyLines:!1,...t},typeof n!="string")throw new TypeError(`Expected \`input\` to be a \`string\`, got \`${typeof n}\``);if(typeof e!="number")throw new TypeError(`Expected \`count\` to be a \`number\`, got \`${typeof e}\``);if(typeof t.indent!="string")throw new TypeError(`Expected \`options.indent\` to be a \`string\`, got \`${typeof t.indent}\``);if(e===0)return n;let o=t.includeEmptyLines?/^/gm:/^(?!\s*$)/gm;return n.replace(o,t.indent.repeat(e))},q=/\s+at.*(?:\(|\s)(.*)\)?/,De=/^(?:(?:(?:node|(?:internal\/[\w/]*|.*node_modules\/(?:babel-polyfill|pirates)\/.*)?\w+)\.js:\d+:\d+)|native)/,Pe=typeof B.default.homedir>"u"?"":B.default.homedir(),Ee=(n,e)=>(e=Object.assign({pretty:!1},e),n.replace(/\\/g,"/").split(`
`).filter(t=>{let o=t.match(q);if(o===null||!o[1])return !0;let a=o[1];return a.includes(".app/Contents/Resources/electron.asar")||a.includes(".app/Contents/Resources/default_app.asar")?!1:!De.test(a)}).filter(t=>t.trim()!=="").map(t=>e.pretty?t.replace(q,(o,a)=>o.replace(a,a.replace(Pe,"~"))):t).join(`
`)),Ie=n=>n.replace(/\s+at .*aggregate-error\/index.js:\d+:\d+\)?/g,""),O=class extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError(`Expected input to be an Array, got ${typeof e}`);e=[...e].map(o=>o instanceof Error?o:o!==null&&typeof o=="object"?Object.assign(new Error(o.message),o):new Error(o));let t=e.map(o=>typeof o.stack=="string"?Ie(Ee(o.stack)):String(o)).join(`
`);t=`
`+xe(t,4),super(t),this.name="AggregateError",Object.defineProperty(this,"_errors",{value:e});}*[Symbol.iterator](){for(let e of this._errors)yield e;}},$e=O,Se=async(n,e,{concurrency:t=1/0,stopOnError:o=!0}={})=>new Promise((a,r)=>{if(typeof e!="function")throw new TypeError("Mapper function is required");if(!((Number.isSafeInteger(t)||t===1/0)&&t>=1))throw new TypeError(`Expected \`concurrency\` to be an integer from 1 and up or \`Infinity\`, got \`${t}\` (${typeof t})`);let i=[],s=[],l=n[Symbol.iterator](),p=!1,d=!1,h=0,g=0,f=()=>{if(p)return;let m=l.next(),u=g;if(g++,m.done){d=!0,h===0&&(!o&&s.length!==0?r(new $e(s)):a(i));return}h++,(async()=>{try{let v=await m.value;i[u]=await e(v,u),h--,f();}catch(v){o?(p=!0,r(v)):(s.push(v),h--,f());}})();};for(let m=0;m<t&&(f(),!d);m++);}),K=(n,e,t)=>new Promise((o,a)=>{if(t=Object.assign({concurrency:1/0},t),typeof e!="function")throw new TypeError("Mapper function is required");let{concurrency:r}=t;if(!(typeof r=="number"&&r>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${r}\` (${typeof r})`);let i=[],s=n[Symbol.iterator](),l=!1,p=!1,d=0,h=0,g=()=>{if(l)return;let f=s.next(),m=h;if(h++,f.done){p=!0,d===0&&o(i);return}d++,Promise.resolve(f.value).then(u=>e(u,m)).then(u=>{i[m]=u,d--,g();},u=>{l=!0,a(u);});};for(let f=0;f<r&&(g(),!p);f++);}),X=K,Ae=K;X.default=Ae;var z=async(n,e,t)=>(await X(n,(a,r)=>Promise.all([e(a,r),a]),t)).filter(a=>!!a[0]).map(a=>a[1]),Q=z,Te=z;Q.default=Te;var y=typeof atom<"u",Ce=typeof atom<"u"&&(atom.inDevMode()||atom.inSpecMode()),L="atom-package-deps.ignored";var Me=/["'&<>]/,G=je;function je(n){var e=""+n,t=Me.exec(e);if(!t)return e;var o,a="",r=0,i=0;for(r=t.index;r<e.length;r++){switch(e.charCodeAt(r)){case 34:o="&quot;";break;case 38:o="&amp;";break;case 39:o="&#39;";break;case 60:o="&lt;";break;case 62:o="&gt;";break;default:continue}i!==r&&(a+=e.substring(i,r)),i=r+1,a+=o;}return i!==r?a+e.substring(i,r):a}async function Be(n,e,t){let o=be.spawn(n,e,t),a=new Promise((r,i)=>{let s={stdout:o.stdout?[]:null,stderr:o.stderr?[]:null};o.on("error",i),o.stdout&&o.stdout.on("data",function(l){s.stdout.push(l),t.handleStdout&&t.handleStdout(l);}),o.stderr&&o.stderr.on("data",function(l){s.stderr.push(l),t.handleStderr&&t.handleStderr(l);}),o.on("close",l=>{let p=null;s.stdout!=null&&(p=t.encoding===null||t.encoding==="buffer"?Buffer.concat(s.stdout):s.stdout.join(""));let d=null;s.stderr!=null&&(d=t.encoding===null||t.encoding==="buffer"?Buffer.concat(s.stderr):s.stderr.join("")),r({exitCode:l,stdout:p,stderr:d});});});return t.handleChildProcess(o),a}function Oe(n,e,t){let o,a=Be(n,e,{...t,handleChildProcess(r){o=r;}});return a.kill=function(r){return o.kill(r)},a}var Le=function(e,t){for(var o=e.split("."),a=t.split("."),r=0;r<3;r++){var i=Number(o[r]),s=Number(a[r]);if(i>s)return 1;if(s>i)return -1;if(!isNaN(i)&&isNaN(s))return 1;if(isNaN(i)&&!isNaN(s))return -1}return 0};async function Ve(n){let e=atom.packages.getLoadedPackage(n),t=e&&e.metadata["package-deps"];return Array.isArray(t)?t:[]}async function Re(n){return atom.packages.resolvePackagePath(n)}async function Fe(n){var e;let t=atom.packages.getLoadedPackage(n.name);return t==null?null:(e=t.metadata.version)!==null&&e!==void 0?e:null}async function He(n){let e=null;try{e=await E.default.promises.stat(n);}catch{}if(e==null||!e.isDirectory())throw new Error("[Package-Deps] Expected packageName to be a readable directory in Node.js invocation");let t=null;try{let a=await E.default.promises.readFile(A.default.join(n,"package.json"),"utf8");t=JSON.parse(a);}catch{}let o=t==null||typeof t!="object"?[]:t["package-deps"];return Array.isArray(o)?o:[]}async function Ne(n){var e;let t=A.default.join((e=process.env.ATOM_HOME)!==null&&e!==void 0?e:A.default.join(B.default.homedir(),".atom"),"packages",n);try{return await E.default.promises.access(t,E.default.constants.R_OK),t}catch{return null}}async function qe(n){var e,t;let{directory:o}=n;if(o==null)return null;let a=null;try{a=JSON.parse(await E.default.promises.readFile(A.default.join(o,"package.json"),"utf8"));}catch{return null}return (e=(t=a)===null||t===void 0?void 0:t.version)!==null&&e!==void 0?e:null}async function Ge(n){if(y){let e=await Fe(n);if(e)return e}return qe(n)}var U=y?Re:Ne;function b(n,e){if(!n)throw new Error(e??"Invariant violation")}async function Ue(n){let e=await(y?Ve(n):He(n));return Ce&&(b(Array.isArray(e),`Dependencies for ${n} are not a valid array`),e.forEach((t,o)=>{if(Array.isArray(t))t.forEach((a,r)=>{let i=`Dependency#${o}#${r} for ${n} is invalid`;b(typeof a.name=="string"&&a.name.length>0,i),b(a.minimumVersion==null||typeof a.minimumVersion=="string"&&a.minimumVersion.length>0,i);}),b(t.length>0,`Dependency#${o} for ${n} has no group items`);else {let a=`Dependency#${o} for ${n} is invalid`;b(typeof t.name=="string"&&t.name.length>0,a),b(t.minimumVersion==null||typeof t.minimumVersion=="string"&&t.minimumVersion.length>0,a);}})),e}async function W(n){if(n.directory==null)return !0;if(n.minimumVersion==null)return !1;let e=await Ge(n);return e==null?!0:Le(n.minimumVersion,e)===1}function We(n){var e;return y?!!((e=atom.config.get(L))!==null&&e!==void 0?e:[]).includes(n):!1}function Ye(n){var e;if(!y)return;let t=new Set((e=atom.config.get(L))!==null&&e!==void 0?e:[]);t.add(n),atom.config.set(L,Array.from(t));}var Je=new Set(["\u2713","done"]),Ke=/(?:Installing|Moving) (.*?) to .* (.*)/;async function Xe(n){let e=y?`"${atom.packages.getApmPath()}"`:"apm",{stdout:t,stderr:o}=await Oe(e,["install",n.name,"--production","--color","false"],{shell:!0}),a=Ke.exec(t.trim());if(a!=null&&Je.has(a[2]))return;let r=new Error(`Error installing dependency: ${n.name}`);throw r.stack=o.trim(),r}async function Y(n){if(typeof n=="string")return {name:n,directory:await U(n)};if("name"in n)return {...n,directory:await U(n.name)};throw console.error("This package-deps entry is not valid. Please see https://github.com/steelbrain/package-deps#how-it-works",{entry:n}),Error("The package-deps entry is not valid. Please see https://github.com/steelbrain/package-deps#how-it-works")}var J=!0;function ze({packageName:n,dependencies:e}){return new Promise(t=>{let o=e.filter(d=>!Array.isArray(d)),a=e.filter(d=>Array.isArray(d)),r=a.length===0,i=r?o.map(d=>d.name).join(", "):"Something went wrong. Check your developer console",s=a.map(d=>d[0]);atom.packages.isPackageDisabled("notifications")&&console.warn(`Enable notifications to install dependencies for ${n}`);let l=atom.notifications.addInfo(`${n} needs to install dependencies`,{dismissable:!0,icon:"cloud-download",detail:i,description:`Install dependenc${e.length===1?"y":"ies"}?`,buttons:[{text:"Yes",onDidClick:()=>{t(r?o:o.concat(s)),l.dismiss();}},{text:"No Thanks",onDidClick:()=>{l.dismiss();}},{text:"Never",onDidClick:()=>{Ye(n),J&&(J=!1,atom.notifications.addInfo("How to reset package-deps memory",{dismissable:!0,description:"To modify the list of ignored files invoke 'Application: Open Your Config' and change the 'atom-package-deps' section"})),l.dismiss();}}]});if(l.onDidDismiss(()=>t([])),!r)try{var p;let d=atom.views.getView(l),h=(p=d==null?void 0:d.element)!==null&&p!==void 0?p:null;if(h==null)throw new Error("Unable to get notification element from view");let g=h.querySelector(".detail-content");if(g==null)throw new Error("Content detail container not found inside the notification");if(g.innerHTML="",o.length>0){let u=document.createElement("div");u.innerHTML=`Packages without choices: <br /><ul><li>${o.map(v=>G(v.name)).join("</li><li>")}</li></ul>`,g.appendChild(u);}let f=document.createElement("div");f.innerHTML="Packages with choices:",g.appendChild(f);let m=document.createElement("ul");a.forEach((u,v)=>{let C=document.createElement("li"),I=document.createElement("select");I.innerHTML=u.map($=>`<option>${G($.name)}</option>`).join(`
`),I.addEventListener("change",()=>{let $=u.find(de=>de.name===I.value);$!=null&&(s[v]=$);}),C.style.marginTop="5px",C.appendChild(I),m.appendChild(C);}),g.appendChild(m);}catch(d){console.error("[Package-Deps] Error during showing package choices to user",d);}})}function Qe({packageName:n,dependencies:e}){let t=[],o=atom.notifications.addInfo(`Installing ${n} dependencies`,{detail:`Installing ${e.map(i=>i.name).join(", ")}`,dismissable:!0}),a=document.createElement("progress");a.max=e.length,a.style.width="100%";try{var r;let i=atom.views.getView(o),s=(r=i==null?void 0:i.element)!==null&&r!==void 0?r:null;if(s==null)throw new Error("Unable to get notification element from view");let l=s.querySelector(".detail-content");if(l==null)throw new Error("Content detail container not found inside the notification");l.appendChild(a);}catch(i){console.error("[Package-Deps] Error during showing installation progress to user",i);}return {handleFailure({dependency:i,error:s}){var l;t.push(i.name),a.value+=1,console.error(`[Package-Deps] Unable to install ${i.name}, Error:`,(l=s==null?void 0:s.stack)!==null&&l!==void 0?l:s);},handleDependencyInstalled(i){a.value+=1;},handleComplete(){o.dismiss(),t.length>0?atom.notifications.addWarning(`Failed to install ${n} dependencies`,{detail:`These packages were not installed, check your console
for more info.
${t.join(`
`)}`,dismissable:!0}):atom.notifications.addSuccess(`Installed ${n} dependencies`,{detail:`Installed ${e.map(i=>i.name).join(", ")}`}),Promise.all(e.map(i=>t.includes(i.name)?null:atom.packages.activatePackage(i.name))).catch(i=>{console.error(`[Package-Deps] Error activating installed packages for ${n}`,i);});}}}async function Ze({dependencies:n}){return n.map(e=>Array.isArray(e)?e[0]:e)}function et({dependencies:n}){let e=!1;return console.log(`Installing dependencies:
${n.map(t=>`  - ${t.name}`).join(`
`)}`),{handleFailure({dependency:t,error:o}){var a;e=!0,console.error(`Unable to install ${t.name}, Error:`,(a=o==null?void 0:o.stack)!==null&&a!==void 0?a:o);},handleDependencyInstalled(t){console.log("Successfully installed",t.name);},handleComplete(){console.log("Installation complete"),e&&(process.exitCode=1);}}}var tt=y?Qe:et,nt=y?ze:Ze;async function ot(n,e=!1){if(b(typeof n=="string"&&n.length>0,"[Package-Deps] Package name is required"),We(n))return;let t=await Ue(n);if(t.length===0)return;let o=await Promise.all(t.map(async s=>Array.isArray(s)?Promise.all(s.map(Y)):Y(s))),a=await Q(o,async function(s){return Array.isArray(s)?(await Promise.all(s.map(l=>W(l)))).every(Boolean):W(s)});if(a.length===0)return;let r;if(e?r=a.map(s=>Array.isArray(s)?s[0]:s):r=await nt({packageName:n,dependencies:a}),r.length===0)return;let i=tt({packageName:n,dependencies:r});await Se(r,async function(s){try{await Xe(s),i.handleDependencyInstalled(s);}catch(l){i.handleFailure({dependency:s,error:l});}},{concurrency:2}),i.handleComplete();}R.install=ot;});var oe=M((ut,ne)=>{function k(n,e){for(var t=0,o=e.length,a=n.length;t<o;t++,a++)n[a]=e[t];return n}var F=new(function(){function n(e){e===void 0&&(e={}),this.name=e.name,this.styleSheet=`
      background-color: `+(e.backgroundColor||"darkgrey")+`;
      border-radius: 2px;
      color: `+(e.color||"white")+`;
      line-height: 1.5;
      padding: 1px 4px;
      text-shadow: 0 1px 0px rgba(0, 0, 0, 0.2);
    `;}return n.prototype.__console__=function(e){for(var t,o=[],a=1;a<arguments.length;a++)o[a-1]=arguments[a];atom!=null&&atom.inDevMode()&&(o.unshift("%c"+this.name+"%c",this.styleSheet,""),(t=window.console)[e].apply(t,o));},n.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.__console__.apply(this,k(["debug"],e));},n.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.__console__.apply(this,k(["error"],e));},n.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.__console__.apply(this,k(["info"],e));},n.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.__console__.apply(this,k(["log"],e));},n.prototype.trace=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.__console__.apply(this,k(["trace"],e));},n.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.__console__.apply(this,k(["warn"],e));},n}())({name:"@atxm/identify"});function ee(n){if(n!=null&&n.id){var e=atom.views.getView(n),t=n.buffer;n!=null&&n.id&&!e.getAttribute("data-editor-id")&&(F.log("Add data-attribute for editor #"+n.id),e.setAttribute("data-editor-id",n.id)),t.id&&!e.getAttribute("data-buffer-id")&&(F.log("Add data-attribute for buffer #"+t.id),e.setAttribute("data-buffer-id",t.id));}}function te(n){if(n!=null&&n.id){var e=atom.views.getView(n);e.getAttribute("data-pane-id")||(F.log("Add data-attribute for pane #"+n.id),e.setAttribute("data-pane-id",n.id));}}ne.exports=function(){atom.workspace.getTextEditors().map(function(n){return ee(n)}),atom.workspace.getPanes().map(function(n){return te(n)}),atom.workspace.observeTextEditors(function(n){return ee(n)}),atom.workspace.observePanes(function(n){return te(n)});};});var ie=M((ht,re)=>{function x(n,e){for(var t=0,o=e.length,a=n.length;t<o;t++,a++)n[a]=e[t];return n}var rt=new(function(){function n(e){e===void 0&&(e={}),this.name=e.name,this.styleSheet=`
      background-color: `+(e.backgroundColor||"darkgrey")+`;
      border-radius: 2px;
      color: `+(e.color||"white")+`;
      line-height: 1.5;
      padding: 1px 4px;
      text-shadow: 0 1px 0px rgba(0, 0, 0, 0.2);
    `;}return n.prototype.__console__=function(e){for(var t,o=[],a=1;a<arguments.length;a++)o[a-1]=arguments[a];atom!=null&&atom.inDevMode()&&(o.unshift("%c"+this.name+"%c",this.styleSheet,""),(t=window.console)[e].apply(t,o));},n.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.__console__.apply(this,x(["debug"],e));},n.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.__console__.apply(this,x(["error"],e));},n.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.__console__.apply(this,x(["info"],e));},n.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.__console__.apply(this,x(["log"],e));},n.prototype.trace=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.__console__.apply(this,x(["trace"],e));},n.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.__console__.apply(this,x(["warn"],e));},n}())({name:"@atxm/title-mode"}),H="[Developer Mode]";function D(n){atom.views.getView(n),document.title&&!document.title.endsWith(H)&&(rt.log("Updating document title to '"+document.title+" "+H+"'"),document.title=document.title+" "+H);}re.exports=function(){atom.inDevMode()&&(atom.workspace.getTextEditors().map(function(n){return D(n)}),atom.workspace.getPanes().map(function(n){return D(n)}),atom.workspace.observeTextEditors(function(n){return D(n)}),atom.workspace.observePanes(function(n){return D(n)}),atom.workspace.observeActiveTextEditor(function(n){return D(n)}),atom.workspace.observeActivePane(function(n){return D(n)}));};});var P={name:"package-developer-toolbar",main:"./lib/main",version:"1.5.0",description:"A toolbar aimed at developers of Atom/Pulsar packages and syntax themes",scripts:{build:"tsup",dev:"npm run start","lint:md":"remark . --quiet --frail --ignore-path .gitignore","lint:js":"eslint ./src --ignore-path .gitignore",lint:"npm-run-all --parallel lint:*",prepare:"husky",start:"tsup --watch",test:"npm run lint"},keywords:["toolbar","tool-bar","package developer"],repository:{type:"git",url:"https://github.com/idleberg/atom-package-developer-toolbar"},homepage:"https://atom.io/packages/package-developer-toolbar",bugs:{url:"https://github.com/idleberg/atom-package-developer-toolbar/issues"},license:"MIT",engines:{atom:">=1.0.0 <2.0.0"},activationHooks:["core:loaded-shell-environment"],consumedServices:{"tool-bar":{versions:{"^0 || ^1":"consumeToolBar"}}},"package-deps":[{name:"browse"},{name:"local-storage"},{name:"open-in-developer-mode"},{name:"open-package"},{name:"package-generator"},[{name:"package-control"},{name:"satisfy-dependencies"}],{name:"tool-bar"}],devDependencies:{"@atxm/developer-console":"^0.5.0","@atxm/identify":"^0.3.0","@atxm/title-mode":"^0.2.0","@types/atom":"^1.40.10","@types/electron":"^1.6.10","@types/node":"^14.14.37","@typescript-eslint/eslint-plugin":"^4.21.0","@typescript-eslint/parser":"^4.21.0","atom-package-deps":"^7.2.3",eslint:"^7.23.0","eslint-config-eslint":"^7.0.0",husky:"^9.1.6","lint-staged":"^15.2.10","npm-run-all2":"^6.2.3",stylelint:"^13.12.0",tslib:"^2.2.0",tsup:"^8.3.0",typescript:"^5.6.2"},"lint-staged":{"*.ts":"eslint --cache --fix"}};var ye={generatorTools:{title:"Show Generator Menu",description:"Displays buttons to generate packages and themes",type:"boolean",default:!0,order:1},browseTools:{title:"Show Browse Menu",description:"Displays buttons to browse files and folders, e.g. `Config Folder`, `Packages Folder`, `Current File` etc.",type:"boolean",default:!0,order:2},settings:{title:"Show Settings Menu",description:"Display buttons for Atom settings",type:"boolean",default:!0,order:3},devTools:{title:"Show Developer Menu",description:"Display buttons for useful developer features, e.g. `Console`, `Reload Window`, `Timecop`, `Package Specs` etc.",type:"boolean",default:!0,order:4},enableIdentify:{title:"Identify Panes & TextEditors",description:"Adds data attributes for editor and pane IDs to the respective HTML element",type:"boolean",default:!0,order:5},enableTitleMode:{title:"Mode Indicator",description:"Indicates whether current window is in developer mode",type:"boolean",default:!0,order:6}};function w(n=""){return n!=null&&n.length?atom.config.get(`${P.name}.${n}`):atom.config.get(`${P.name}`)}var se=j(Z()),le=j(oe());function _(n,e){for(var t=0,o=e.length,a=n.length;t<o;t++,a++)n[a]=e[t];return n}var at=function(){function n(e){e===void 0&&(e={}),this.name=e.name,this.styleSheet=`
      background-color: `+(e.backgroundColor||"darkgrey")+`;
      border-radius: 2px;
      color: `+(e.color||"white")+`;
      line-height: 1.5;
      padding: 1px 4px;
      text-shadow: 0 1px 0px rgba(0, 0, 0, 0.2);
    `;}return n.prototype.__console__=function(e){for(var t,o=[],a=1;a<arguments.length;a++)o[a-1]=arguments[a];atom!=null&&atom.inDevMode()&&(o.unshift("%c"+this.name+"%c",this.styleSheet,""),(t=window.console)[e].apply(t,o));},n.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.__console__.apply(this,_(["debug"],e));},n.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.__console__.apply(this,_(["error"],e));},n.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.__console__.apply(this,_(["info"],e));},n.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.__console__.apply(this,_(["log"],e));},n.prototype.trace=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.__console__.apply(this,_(["trace"],e));},n.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.__console__.apply(this,_(["warn"],e));},n}(),ae=at;var T=new ae({name:P.name,backgroundColor:"gray"});var ce=j(ie()),c;async function wt(){T.log("Activating package"),(0, se.install)("package-developer-toolbar"),w("enableIdentify")===!0&&(0, le.default)(),w("enableTitleMode")===!0&&(0, ce.default)();}function bt(){T.log("Deactivating package"),c&&(c.removeItems(),c=null);}function kt(n){T.log("Consuming tool-bar service"),c=n("developer-tool-bar");let e=Object.keys(atom.packages.loadedPackages);if(e.includes("open-package")&&w("generatorTools")!==!1&&(c.addButton({icon:"auto-fix",callback:"package-generator:generate-package",tooltip:"Generate Package",iconset:"mdi"}),c.addButton({icon:"brush",callback:"package-generator:generate-syntax-theme",tooltip:"Generate Syntax Theme",iconset:"mdi"}),c.addButton({icon:"folder-plus",callback:"open-package:toggle",tooltip:"Open Package",iconset:"mdi"})),c.addSpacer(),e.includes("browse")&&w("browseTools")!==!1&&(c.addButton({icon:"atom",callback:"browse:configuration-folder",tooltip:"Open Configuration Folder",iconset:"mdi"}),c.addButton({icon:"dropbox",callback:"browse:packages-folder",tooltip:"Open Packages Folder",iconset:"mdi"}),c.addButton({icon:"folder-move",callback:"browse:project-folders",tooltip:"Open Project Folder(s)",iconset:"mdi"}),c.addButton({icon:"file-move",callback:"browse:reveal-file",tooltip:"Reveal File",iconset:"mdi"})),c.addSpacer(),w("settings")!==!1&&(c.addButton({icon:"tune",callback:"application:show-settings",tooltip:"Show Settings",iconset:"mdi"}),c.addButton({icon:"wrench",callback:"application:open-your-config",tooltip:"Open Your Config",iconset:"mdi"}),e.includes("settings-view")&&(c.addButton({icon:"plus",callback:"settings-view:install-packages-and-themes",tooltip:"Install Packages/Themes",iconset:"mdi"}),c.addButton({icon:"cloud-download",callback:"settings-view:check-for-package-updates",tooltip:"Update Packages/Themes",iconset:"mdi"})),c.addSpacer()),w("devTools")!==!1)return c.addButton({icon:"console",callback:"window:toggle-dev-tools",tooltip:"Toggle Developer Tools",iconset:"mdi"}),e.includes("open-in-developer-mode")?c.addButton({icon:"xml",callback:"open-in-developer-mode:toggle",tooltip:atom.inDevMode()?"Re-open file in normal mode":"Re-open file in Dev Mode",iconset:"mdi"}):c.addButton({icon:"xml",callback:"application:open-dev",tooltip:"Open in Dev Mode",iconset:"mdi"}),(e.includes("timecop")||e.includes("timecop-2"))&&c.addButton({icon:"av-timer",callback:e.includes("timecop-2")?"timecop-2:view":"timecop:view",tooltip:"Timecop",iconset:"mdi"}),e.includes("deprecation-cop")&&c.addButton({icon:"alert",callback:"deprecation-cop:view",tooltip:"Deprecation Cop",iconset:"mdi"}),c.addButton({icon:"test-tube",callback:"window:run-package-specs",tooltip:"Run Package Specs",iconset:"mdi"}),(e.includes("package-control")||e.includes("satisfy-dependencies"))&&c.addButton({icon:"clipboard-check-outline",callback:e.includes("package-control")?"package-control:satisfy-dependencies":"satisfy-dependencies:all",tooltip:"Satisfy Dependencies",iconset:"mdi"}),e.includes("local-storage")&&c.addButton({icon:"database",callback:"local-storage:open-item",tooltip:"Open localStorage",iconset:"mdi"}),c.addButton({icon:"reload",callback:"window:reload",tooltip:"Reload Window",iconset:"mdi"}),c.addSpacer()}/*! Bundled license information:

atom-package-deps/lib/index.js:
  (*!
   * escape-html
   * Copyright(c) 2012-2013 TJ Holowaychuk
   * Copyright(c) 2015 Andreas Lubbe
   * Copyright(c) 2015 Tiancheng "Timothy" Gu
   * MIT Licensed
   *)

@atxm/identify/lib/index.js:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)

@atxm/title-mode/lib/index.js:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)

@atxm/developer-console/lib/index.js:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)
*/

exports.activate = wt;
exports.config = ye;
exports.consumeToolBar = kt;
exports.deactivate = bt;
